<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Applied Machine Learning for Educational Data Science: Data Preprocessing I: Continuous and Categorical Data</title>


  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>

  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-07-06"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-07-06"/>
  <meta name="article:author" content="Cengiz Zopluoglu"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Applied Machine Learning for Educational Data Science: Data Preprocessing I: Continuous and Categorical Data"/>
  <meta property="og:type" content="article"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="Applied Machine Learning for Educational Data Science"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Applied Machine Learning for Educational Data Science: Data Preprocessing I: Continuous and Categorical Data"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Data Preprocessing I: Continuous and Categorical Data"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation"]}},"value":[{"type":"character","attributes":{},"value":["Cengiz Zopluoglu"]},{"type":"character","attributes":{},"value":["University of Oregon"]}]}]},{"type":"character","attributes":{},"value":["07/06/2022"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float","theme"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["theme.css"]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
          var fn = $(this).children()[0]
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */

  /* Code chunks */

  d-article pre { /* Chunk output */
    border-radius: 5px; /* Rounded edges */
    font-size: 12px;
    color: black;
    background-color: #c1daf0;
    padding: 5px 5px 5px 18px;
  }

  d-article div.sourceCode pre { /* Chunk code */
    border-radius: 5px; /* Rounded edges */
    background-color: #fff2cc;
    color: black;
    padding: 5px 5px 5px 18px;
  }

  d-article div.sourceCode {
    background-color: transparent;
  }</style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=G-1RQZJC7E05"></script>
  <script type="text/javascript" cookie-consent="tracking">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1RQZJC7E05');
  </script>
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Data Preprocessing I: Continuous and Categorical Data","authors":[{"author":"Cengiz Zopluoglu","authorURL":"#","affiliation":"University of Oregon","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-07-06T00:00:00.000-07:00","citationText":"Zopluoglu, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">Applied Machine Learning for Educational Data Science</a>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="syllabus.html">Syllabus</a>
<a href="schedule.html">Schedule</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Lecture Notes
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="lecture-1.html">Lecture-1</a>
<a href="lecture-2a.html">Lecture-2a</a>
<a href="lecture-2b.html">Lecture-2b</a>
<a href="lecture-3a.html">Lecture-3a</a>
<a href="lecture-3b.html">Lecture-3b</a>
<a href="lecture-4.html">Lecture-4</a>
<a href="lecture-5.html">Lecture-5</a>
<a href="lecture-6a.html">Lecture-6a</a>
<a href="lecture-6b.html">Lecture-6b</a>
<a href="lecture-7a.html">Lecture-7a</a>
<a href="lecture-7b.html">Lecture-7b</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Kaggle Notebooks
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://www.kaggle.com/code/uocoeeds/week-1-introduction/notebook">Notebook-1</a>
<a href="https://www.kaggle.com/code/uocoeeds/lecture-2a-data-preprocessing-i">Notebook-2a</a>
<a href="https://www.kaggle.com/code/uocoeeds/lecture-2b-data-preprocessing-ii">Notebook-2b</a>
<a href="https://www.kaggle.com/code/uocoeeds/the-recipes-package-demo">The {recipes} demo</a>
<a href="https://www.kaggle.com/code/uocoeeds/lecture-3a-overview-of-linear-regression">Notebook-3a</a>
<a href="https://www.kaggle.com/code/uocoeeds/lecture-3b-review-of-bias-variance-tradeoff">Notebook-3b</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-prediction-model-with-cross-validation">Building Linear Models with `caret`</a>
<a href="https://www.kaggle.com/code/uocoeeds/lecture-4-regularized-penalized-regression">Notebook-4</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-ridge-regression-model">Building a Ridge Regression Model</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-lasso-regression-model">Building a Lasso Regression Model</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-regression-model-with-elastic-net">Building an Elastic Net Model</a>
<a href="https://www.kaggle.com/code/uocoeeds/using-the-prediction-models-for-a-new-text">Using the Existing Models to Predict Outcome for New Observations</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-logistic-regression-model/notebook">Building a Logistic Regression Model</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-classification-model-with-ridge-penalty/">Building a Classification Model with Ridge Penalty</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-classification-model-with-lasso-penalty">Building a Classification Model with Lasso Penalty</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-classification-model-with-elastic-net">Building a Classification Model with Elastic Net</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-prediction-model-using-knn">Building a Prediction Model with K-nearest neighbors</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-classification-model-using-knn">Building a Classification Model with K-nearest neighbors</a>
<a href="https://www.kaggle.com/uocoeeds/building-a-prediction-model-using-a-decision-tree">Building a Prediction Model with a Decision Tree</a>
<a href="https://www.kaggle.com/code/uocoeeds/building-a-classification-tree-algorithm">Building a Classification Model with a Decision Tree</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Slides
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="slides/slide1.html">Week 1</a>
<a href="slides/slide2.html">Week 2</a>
<a href="slides/slide3.html">Week 3 &amp; 4</a>
<a href="slides/slide4.html">Week 5</a>
<a href="slides/slide5.html">Week 6 &amp; 7</a>
<a href="slides/slide6a.html">Week 8_Part 1</a>
<a href="slides/slide6b.html">Week 8_Part 2</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Assignments
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://www.kaggle.com/code/uocoeeds/assignment-1">Assignment1</a>
<a href="https://www.kaggle.com/code/uocoeeds/assignment-2">Assignment2</a>
<a href="https://www.kaggle.com/code/uocoeeds/assignment-3">Assignment3</a>
</div>
</div>
<a href="https://github.com/uo-datasci-specialization/c4-ml-fall-2022">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Data Preprocessing I: Continuous and Categorical Data</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->

</div>

<div class="d-byline">
  Cengiz Zopluoglu  (University of Oregon)
  
<br/>07/06/2022
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#scales-of-measurement-and-types-of-variables"
id="toc-scales-of-measurement-and-types-of-variables">1. Scales of
Measurement and Types of Variables</a></li>
<li><a href="#processing-categorical-variables"
id="toc-processing-categorical-variables">2. Processing Categorical
Variables</a>
<ul>
<li><a href="#one-hot-encoding-dummy-variables"
id="toc-one-hot-encoding-dummy-variables">2.1 One-hot encoding (Dummy
Variables)</a></li>
<li><a href="#label-encoding" id="toc-label-encoding">2.2. Label
encoding</a></li>
<li><a href="#polynomial-contrasts" id="toc-polynomial-contrasts">2.3.
Polynomial Contrasts</a></li>
</ul></li>
<li><a href="#processing-cyclic-variables"
id="toc-processing-cyclic-variables">3. Processing Cyclic
Variables</a></li>
<li><a href="#processing-continuous-variables"
id="toc-processing-continuous-variables">4. Processing Continuous
Variables</a>
<ul>
<li><a href="#centering-and-scaling-standardization"
id="toc-centering-and-scaling-standardization">4.1. Centering and
Scaling (Standardization)</a></li>
<li><a href="#box-cox-transformation"
id="toc-box-cox-transformation">4.2. Box-Cox transformation</a></li>
<li><a href="#logit-transformation" id="toc-logit-transformation">4.3.
Logit Transformation</a></li>
<li><a href="#basis-expansions" id="toc-basis-expansions">4.4. Basis
Expansions</a></li>
</ul></li>
<li><a href="#handling-missing-data" id="toc-handling-missing-data">5.
Handling Missing Data</a>
<ul>
<li><a href="#creating-an-indicator-variable-for-missingness"
id="toc-creating-an-indicator-variable-for-missingness">5.1. Creating an
indicator variable for missingness</a></li>
<li><a href="#imputation" id="toc-imputation">5.2. Imputation</a></li>
</ul></li>
<li><a href="#wrapping-up-using-the-recipes-package"
id="toc-wrapping-up-using-the-recipes-package">6. Wrapping-up using the
<code>recipes</code> package</a></li>
</ul>
</nav>
</div>
<style>
.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
    z-index: 2;
    color: #fff;
    background-color: #FC4445;
    border-color: #97CAEF;
}

#infobox {
  padding: 1em 1em 1em 4em;
  margin-bottom: 10px;
  border: 2px solid black;
  border-radius: 10px;
  background: #E6F6DC 5px center/3em no-repeat;
}

</style>
<p>[Updated: Sun, Nov 27, 2022 - 14:04:09 ]</p>
<h1 id="scales-of-measurement-and-types-of-variables">1. Scales of
Measurement and Types of Variables</h1>
<p>It is important to understand the nature of variables and how they
were measured and represented in a dataset. In social sciences, in
particular psychology, there is a methodological consensus about the
framework provided by <a
href="https://www.jstor.org/stable/1671815">Stevens (1946)</a>, also see
<a href="https://doi.org/10.1080/00049530210001706563">Michell
(2002)</a> for an in-depth discussion. According to Stevens definition,
there are four levels of measurement: nominal, ordinal, interval, and
ratio. Whether a variable has a nominal, ordinal, interval, or ratio
scale depends on the character of the empirical operations performed
while constructing the variable.</p>
<ul>
<li><p>Nominal scale: Variables with a nominal scale cannot be
meaningfully added, subtracted, divided, or multiplied. Also, there is
no hierarchical order among the assigned values. Most variables
containing labels for individual observations can be considered nominal,
e.g., hair color, city, state, and ethnicity.</p></li>
<li><p>Ordinal scale: Variables with an ordinal scale also represent
labels; however, there is a meaningful hierarchy among the assigned
values. For instance, if a variable is coded as Low, Medium, and High,
they are simply labels. Still, we know that High represents something
more than Medium and Medium represents something higher than Low (High
&gt; Medium &gt; Low). On the other hand, the distance between the
assigned values does not necessarily represent the same amount of
difference. Other examples of variables that can be considered as
ordinal are letter grades (A-F), scores from Likert type items (Strongly
agree, agree, disagree, strongly disagree), education status(high
school, college, masters, Ph.D.), cancer stage (stage1, stage2,
stage3), order of finish in a competition (1st, 2nd, 3rd).</p></li>
<li><p>Interval scale: Variables with an ordinal scale represent
quantities with equal measurement units but dont have an absolute zero
point. For instance, a typical example of an interval scale is
temperature measured on the Fahrenheit scale. The difference between 20F
and 30F is the same as between 60F and 70F. However, 0F does not
indicate the absence of heat.</p></li>
<li><p>Ratio scale: Variables with a ratio scale represent quantities
with equal measurement units and have an absolute zero. Due to the
existence of an absolute zero point that represents nothing, the ratio
of measurements is also meaningful. Typical examples are height, mass,
distance, and length.</p></li>
</ul>
<p>Below table provides a summary of properties for each scale.</p>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 19%" />
<col style="width: 29%" />
<col style="width: 27%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Indicating Difference</th>
<th style="text-align: center;">Indicating Direction of Difference</th>
<th style="text-align: center;">Indicating Amount of Difference</th>
<th style="text-align: center;">Has absolute zero</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nominal</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>Ordinal</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>Interval</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>Ratio</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
</tbody>
</table>
<p>In this class, we classify the variables in two types:
<strong>Categorical</strong> and <strong>Continuous</strong>. The
variables with a nominal or ordinal scale are considered as
<strong>Categorical</strong> and the variables with an interval or ratio
scale are considered as <strong>Continuous</strong>.</p>
<h1 id="processing-categorical-variables">2. Processing Categorical
Variables</h1>
<p>When categorical predictors are in a dataset, it is essential to
transform them into numerical codes. When encoding categorical
predictors, we try to preserve as much information as possible from
their labels. Therefore, different strategies may be used for
categorical variables with different ordinal scales.</p>
<h2 id="one-hot-encoding-dummy-variables">2.1 One-hot encoding (Dummy
Variables)</h2>
<p>A dummy variable is a synthetic variable with two outcomes (0 and 1)
representing a group membership. When there is a nominal variable with
<em>N</em> levels, it is typical to create <em>N</em> dummy variables to
represent the information in the nominal variable. Each dummy variable
represents membership to one of the levels in the nominal variable.
These dummy variables can be used as features in predictive models.</p>
<p>In its simplest case, consider the variable <code>Race</code> in the
Recidivism dataset with two levels: Black and White. We can create two
dummy variables: the first dummy variable represents whether or not an
individual is Black, and the second dummy variable represents whether or
not the individual is White.</p>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Dummy Variable 1</th>
<th style="text-align: center;">Dummy Variable 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Black</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>White</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>Lets consider another example from the Recidivism dataset. Variable
<code>Prison_Offense</code> has five categories: Violent/Sex,
Violent/Non-Sex, Property, Drug, and Other. We can create five dummy
variables using the following coding scheme.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Dummy Variable 1</th>
<th style="text-align: center;">Dummy Variable 2</th>
<th style="text-align: center;">Dummy Variable 3</th>
<th style="text-align: center;">Dummy Variable 4</th>
<th style="text-align: center;">Dummy Variable 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Violent/Sex</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>Violent/Non-Sex</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td>Property</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>Drug</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td>Other</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>Note that <code>Prison_Offence</code> is missing for several
observations. You can fill in the missing values before creating dummy
variables using one of the methods we will discuss later. Alternatively,
we can define Missing as the sixth category to preserve that
information.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Dummy Variable 1</th>
<th style="text-align: center;">Dummy Variable 2</th>
<th style="text-align: center;">Dummy Variable 3</th>
<th style="text-align: center;">Dummy Variable 4</th>
<th style="text-align: center;">Dummy Variable 5</th>
<th style="text-align: center;">Dummy Variable 6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Violent/Sex</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>Violent/Non-Sex</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td>Property</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>Drug</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td>Other</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td>Missing</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>In some cases, when you have a geographical location with a
reasonable number of categories (e.g., counties or cities in a state,
schools in a district), you can also create dummy variables to represent
this information. In our case, the Recidivism dataset has a variable
called <code>Residence_PUMA</code> indicating <a
href="https://www.census.gov/programs-surveys/geography/guidance/geo-areas/pumas.html">Public
Use Microdata Area (PUMA)</a> for the residence address at the time
individual was released. This variable has 25 unique codes (1-25);
however, these numbers are just labels. So, one can create 25 different
dummy variables to represent 25 different PUMAs.</p>
<hr />
<div id="infobox">
<center style="color:black;">
<strong>NOTE</strong>
</center>
<p>When you fit a typical regression model without regularization using
ordinary least-squares (OLS), a typical practice is to drop a dummy
variable for one of the levels. So, for instance, if there are
<em>N</em> levels for a nominal variable, you only have to create
<em>(N-1)</em> dummy variables, as the Nth one has redundant
information. The information regarding the excluded category is
represented in the intercept term. It creates a problem when you put all
<em>N</em> dummy variables into the model because the OLS procedure
tries to invert a singular matrix, and you will likely get an error
message.</p>
<p>On the other hand, this is not an issue when you fit a regularized
regression model, which will be the case in this class. Therefore, you
do not need to drop one of the dummy variables and can include all of
them in the analysis. In fact, it may be beneficial to keep the dummy
variables for all categories in the model when regularization is used in
the regression. Otherwise, the model may produce different predictions
depending on which category is excluded.</p>
</div>
<hr />
<h2 id="label-encoding">2.2. Label encoding</h2>
<p>When the variable of interest is ordinal, and there is a hierarchy
among the levels, we can still use one-hot encoding to create a set of
dummy variables to represent the information in the ordinal variable.
However, dummy variables will not provide information regarding the
categories hierarchy.</p>
<p>For instance, consider the variable <code>Age_At_Release</code> in
the Recidivism dataset. It is coded as 7 different age intervals in the
dataset: 18-22, 23-27, 28-32, 33-37, 38-42, 43-47, 48 or older. One can
create seven dummy variables to represent each category in this
variable. Alternatively, one can assign a numeric variable to each
category that may represent the information in these categories. For
instance, one can assign numbers from 1 to 7, respectively. Or, one can
choose the midpoint of each interval to represent each category (e.g.,
20,25,31,35,40,45,60).</p>
<p>Another example would be the variable <code>Education Level</code> in
the Recidivism dataset. It has three levels: At least some college, High
School Diploma, and Less than a High School diploma. One can create
three dummy variables to represent each level. Alternatively, one can
assign 1, 2, and 3, respectively. Or, one can assign a number for the
approximate years of schooling for each level, such as 9, 12, and
15.</p>
<h2 id="polynomial-contrasts">2.3. Polynomial Contrasts</h2>
<p>Another way of encoding an ordinal variable is to use polynomial
contrasts. The polynomial contrasts may be helpful if one wants to
explore whether or not there is a linear, quadratic, cubic, etc., the
relationship between the predictor variable and outcome variable. You
can use the <code>stat::poly()</code> function in R to obtain the set of
polynomial contrasts. If there are <em>N</em> levels in an ordinal
variable, you can get polynomials up to degree <em>N-1</em>.</p>
<p>For instance, suppose you have an ordinal variable with three levels:
Low, Medium, and High. Then, <code>stat::poly(x=1:3,degree=2)</code>
will return the polynomial contrasts for the linear and quadratic terms.
Notice that the input for the <code>poly</code> function is a vector of
numeric values corresponding to the ordinal variable levels and the
degree of the requested polynomial terms. For this example, it creates
two sets of vectors to represent this ordinal variable. Note that the
sum of the squares within each column equals 1, and the dot product of
the contrast vectors equals 0. In other words, the polynomial terms
represent a set of <strong>orthonormal vectors</strong>.</p>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Linear</th>
<th style="text-align: center;">Quadratic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Low</td>
<td style="text-align: center;">-0.707</td>
<td style="text-align: center;">0.408</td>
</tr>
<tr class="even">
<td>Medium</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">-0.816</td>
</tr>
<tr class="odd">
<td>High</td>
<td style="text-align: center;">0.707</td>
<td style="text-align: center;">0.408</td>
</tr>
</tbody>
</table>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>ctr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/poly.html'>poly</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='fl'>2</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>ctr</span>,<span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>          1      2
[1,] -0.707  0.408
[2,]  0.000 -0.816
[3,]  0.707  0.408
attr(,&quot;coefs&quot;)
attr(,&quot;coefs&quot;)$alpha
[1] 2 2

attr(,&quot;coefs&quot;)$norm2
[1] 1.0000000 3.0000000 2.0000000 0.6666667

attr(,&quot;degree&quot;)
[1] 1 2
attr(,&quot;class&quot;)
[1] &quot;poly&quot;   &quot;matrix&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>ctr</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>ctr</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>ctr</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>*</span><span class='va'>ctr</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 0.00000000000000006410345</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-2-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<p>If we consider the variable <code>Age_At_Release</code> with 7
different levels, then we can have polynomial terms up to the 6th
degree.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>ctr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/poly.html'>poly</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>7</span>,<span class='fl'>6</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>ctr</span>,<span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>          1      2      3      4      5      6
[1,] -0.567  0.546 -0.408  0.242 -0.109  0.033
[2,] -0.378  0.000  0.408 -0.564  0.436 -0.197
[3,] -0.189 -0.327  0.408  0.081 -0.546  0.493
[4,]  0.000 -0.436  0.000  0.483  0.000 -0.658
[5,]  0.189 -0.327 -0.408  0.081  0.546  0.493
[6,]  0.378  0.000 -0.408 -0.564 -0.436 -0.197
[7,]  0.567  0.546  0.408  0.242  0.109  0.033
attr(,&quot;coefs&quot;)
attr(,&quot;coefs&quot;)$alpha
[1] 4 4 4 4 4 4

attr(,&quot;coefs&quot;)$norm2
[1]   1.0000   7.0000  28.0000  84.0000 216.0000 452.5714 685.7143
[8] 561.0390

attr(,&quot;degree&quot;)
[1] 1 2 3 4 5 6
attr(,&quot;class&quot;)
[1] &quot;poly&quot;   &quot;matrix&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-4-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<hr />
<div id="infobox">
<center style="color:black;">
<strong>NOTE</strong>
</center>
<p>There are other ways of encoding nominal and ordinal variables (e.g.,
Helmert contrasts), or one can come up with their own set of contrast
values. When the goal of analysis is inference and you run analysis to
respond to a specific research question, your research question
typically dictates the type of encoding to use. You choose a coding
scheme that provides you the most interpretable coefficients to respond
to your research question.</p>
<p>On the other hand, when the goal of analysis is prediction, how you
encode your categorical variable does not make much difference. In fact,
they provide very similar predictions. Below, I provide an example using
Age_at_Release variable to predict the outcome using different coding
schemes and report the average squared error of predictions from a
logistic regression model.</p>
<center>
<table>
<thead>
<tr class="header">
<th>Encoding</th>
<th style="text-align: center;">Average Squared Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intercept-Only (NULL)</td>
<td style="text-align: center;">0.1885789</td>
</tr>
<tr class="even">
<td>Dummy Variables</td>
<td style="text-align: center;">0.1861276</td>
</tr>
<tr class="odd">
<td>Label Encoding</td>
<td style="text-align: center;">0.1861888</td>
</tr>
<tr class="even">
<td>Polynomial Contrasts</td>
<td style="text-align: center;">0.1861276</td>
</tr>
<tr class="odd">
<td>Helmert Contrasts</td>
<td style="text-align: center;">0.1861276</td>
</tr>
</tbody>
</table>
</center>
<p>Notice that one-hot encoding, polynomial contrasts, and helmert
contrasts have identical performance. In fact, they yield the exact same
predicted value for observations. Moreover, a simple label encoding with
a single constructed variable does (almost) as well as other encoding
types with multiple constructed variables.</p>
</div>
<hr />
<h1 id="processing-cyclic-variables">3. Processing Cyclic Variables</h1>
<p>There are sometimes variables that are cyclic by nature (e.g.,
months, days, hour), and a type of encoding that represents their cyclic
nature may be the most meaningful way to represent them instead of
numerical or categorical encoding. One way to achieve this is to create
two new variables using a sine and cosine transformation as the
following:</p>
<p><span class="math display">\[x_{1} = sin(\frac{2 \pi
x}{max(x)}),\]</span> <span class="math display">\[x_{2} = cos(\frac{2
\pi x}{max(x)}).\]</span></p>
<p>For instance, suppose one of the variables in a dataset is the day of
the week. We can represent its cyclic nature using the two variables as
defined the following. Once the corresponding coordinates are calculated
for each day of the week, the single variable that represents days in
the data can be replaced with these two variables representing their
coordinates in a unit circle.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>days <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Mon'</span>,<span class='st'>'Tue'</span>,<span class='st'>'Wed'</span>,<span class='st'>'Thu'</span>,<span class='st'>'Fri'</span>,<span class='st'>'Sat'</span>,<span class='st'>'Sun'</span><span class='op'>)</span>,</span>
<span>                x <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>7</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>d</span><span class='op'>$</span><span class='va'>x1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>sin</a></span><span class='op'>(</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>*</span><span class='va'>d</span><span class='op'>$</span><span class='va'>x</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>7</span><span class='op'>)</span></span>
<span><span class='va'>d</span><span class='op'>$</span><span class='va'>x2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>cos</a></span><span class='op'>(</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>*</span><span class='va'>d</span><span class='op'>$</span><span class='va'>x</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>7</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>d</span></span></code></pre>
</div>
<pre><code>  days x                        x1         x2
1  Mon 1  0.7818314824680298036341  0.6234898
2  Tue 2  0.9749279121818236193420 -0.2225209
3  Wed 3  0.4338837391175582314240 -0.9009689
4  Thu 4 -0.4338837391175580093794 -0.9009689
5  Fri 5 -0.9749279121818236193420 -0.2225209
6  Sat 6 -0.7818314824680299146564  0.6234898
7  Sun 7 -0.0000000000000002449213  1.0000000</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<p>We can apply the same concept to any cyclic variable. Here is another
example for the time of day.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>hour <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>24</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>d</span><span class='op'>$</span><span class='va'>x1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>sin</a></span><span class='op'>(</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>*</span><span class='va'>d</span><span class='op'>$</span><span class='va'>hour</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>24</span><span class='op'>)</span></span>
<span><span class='va'>d</span><span class='op'>$</span><span class='va'>x2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>cos</a></span><span class='op'>(</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>*</span><span class='va'>d</span><span class='op'>$</span><span class='va'>hour</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>24</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>d</span></span></code></pre>
</div>
<pre><code>   hour                        x1                         x2
1     1  0.2588190451025207394764  0.96592582628906831221371
2     2  0.4999999999999999444888  0.86602540378443870761060
3     3  0.7071067811865474617150  0.70710678118654757273731
4     4  0.8660254037844385965883  0.50000000000000011102230
5     5  0.9659258262890683122137  0.25881904510252073947640
6     6  1.0000000000000000000000  0.00000000000000006123032
7     7  0.9659258262890683122137 -0.25881904510252062845410
8     8  0.8660254037844387076106 -0.49999999999999977795540
9     9  0.7071067811865475727373 -0.70710678118654746171501
10   10  0.4999999999999999444888 -0.86602540378443870761060
11   11  0.2588190451025210170322 -0.96592582628906820119141
12   12  0.0000000000000001224606 -1.00000000000000000000000
13   13 -0.2588190451025207949876 -0.96592582628906831221371
14   14 -0.4999999999999997224442 -0.86602540378443881863291
15   15 -0.7071067811865471286481 -0.70710678118654790580422
16   16 -0.8660254037844383745437 -0.50000000000000044408921
17   17 -0.9659258262890683122137 -0.25881904510252062845410
18   18 -1.0000000000000000000000 -0.00000000000000018369095
19   19 -0.9659258262890684232360  0.25881904510252029538719
20   20 -0.8660254037844385965883  0.50000000000000011102230
21   21 -0.7071067811865476837596  0.70710678118654735069271
22   22 -0.5000000000000004440892  0.86602540378443837454370
23   23 -0.2588190451025215721437  0.96592582628906809016911
24   24 -0.0000000000000002449213  1.00000000000000000000000</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-8-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<h1 id="processing-continuous-variables">4. Processing Continuous
Variables</h1>
<h2 id="centering-and-scaling-standardization">4.1. Centering and
Scaling (Standardization)</h2>
<p>Centering a variable is done by subtracting the variables mean from
every variables value, ensuring that the mean of the centered variable
equals zero. Scaling a variable is dividing the value of each
observation by the variables standard deviation. When centering and
scaling are both applied, it is called standardization.</p>
<p>When we standardize a variable, we ensure that its mean is equal to
zero and variance is equal to 1. Standardizing outcome and predictor
variables may be critical and necessary for specific models (e.g.,
K-nearest neighbor, support vector machines, penalized regression), but
it is not always necessary for other models (e.g., decision tree
models).</p>
<hr />
<div id="infobox">
<center style="color:black;">
<strong>NOTE</strong>
</center>
<p>Standardizing a variable only changes the first and second moments of
a distribution (mean and variance); however, it doesnt change the third
and fourth moments of a distribution (skewness and kurtosis). Notice
that the skewness and kurtosis for both the original and the
standardized variable are 3.64 and 18.24, respectively. We only change
the mean to zero and variance to one by standardizing a variable.</p>
</div>
<hr />
<h2 id="box-cox-transformation">4.2. Box-Cox transformation</h2>
<p>Variables with extreme skewness and kurtosis may deteriorate the
model performance for certain types of models. Therefore, it may
sometimes be useful to transform a variable with extreme skewness and
kurtosis such that its distribution approximates to a normal
distribution. Box-Cox transformation is a method to find an optimal
parameter of <span class="math inline">\(\lambda\)</span> to apply the
following transformation:</p>
<p><span class="math display">\[y^{(\lambda)}=\left\{\begin{matrix}
\frac{y^{\lambda}-1}{\lambda} &amp; , \lambda \neq 0 \\
&amp; \\
ln(y) &amp; , \lambda = 0
\end{matrix}\right.\]</span></p>
<p>Below is an example of transforming the a right-skewed variable using
the <code>boxcox</code> function from the <code>bestNormalize</code>
package. Notice that the skewness and the kurtosis for the transformed
variable are 0 and -0.02, respectively.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://petersonr.github.io/bestNormalize/'>bestNormalize</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://personality-project.org/r/psych/'>psych</a></span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='va'>old</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Beta.html'>rbeta</a></span><span class='op'>(</span><span class='fl'>1000</span>,<span class='fl'>1</span>,<span class='fl'>1000</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://petersonr.github.io/bestNormalize/reference/boxcox.html'>boxcox</a></span><span class='op'>(</span><span class='va'>old</span>,standardize<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span></span>
<span><span class='va'>fit</span></span></code></pre>
</div>
<pre><code>Non-Standardized Box Cox Transformation with 1000 nonmissing obs.:
 Estimated statistics:
 - lambda = 0.2492177 
 - mean (before standardization) = -3.36775 
 - sd (before standardization) = 0.186852 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>new</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span></span>
<span> </span>
<span><span class='fu'><a href='https://rdrr.io/pkg/psych/man/describe.html'>describe</a></span><span class='op'>(</span><span class='va'>old</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>   vars    n mean sd median trimmed mad min  max range skew kurtosis
X1    1 1000    0  0      0       0   0   0 0.01  0.01 2.31     8.54
   se
X1  0</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/psych/man/describe.html'>describe</a></span><span class='op'>(</span><span class='va'>new</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>   vars    n  mean   sd median trimmed  mad   min   max range  skew
X1    1 1000 -3.37 0.19  -3.37   -3.37 0.19 -3.89 -2.75  1.13 -0.03
   kurtosis   se
X1    -0.22 0.01</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-10-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<hr />
<div id="infobox">
<center style="color:black;">
<strong>NOTE</strong>
</center>
<p>Box-Cox transformation can be used only for variables with positive
values. Therefore, it is a good idea to first implement the Box-Cox
transformation, and then standardize a variable if both procedures will
be applied to a variable. If there is a variable with negative values or
a mix of both positive and negative values, the Yeo-Johnson
transformation is available as an extension of the Box-Cox
transformation. See <a
href="https://www.stat.umn.edu/arc/yjpower.pdf">this link</a> for more
information. The function <code>yeojohnson</code> is available in the
<code>bestNormalizer</code> package to implement the Yeo-Johnson
transformation (See, <a
href="https://rdrr.io/cran/bestNormalize/man/yeojohnson.html">?bestNormalizer::yeojohnson</a>).</p>
</div>
<hr />
<h2 id="logit-transformation">4.3. Logit Transformation</h2>
<p>When a variable is a proportion bounded between 0 and 1, the logit
transformation can be applied such that</p>
<p><span class="math display">\[\pi^{*} =
ln(\frac{\pi}{1-\pi}),\]</span></p>
<p>where <span class="math inline">\(\pi\)</span> represents a
proportion. This may be particularly useful when your outcome variable
is a proportion bounded between 0 and 1. When a linear model is used to
model an outcome bounded between 0 and 1, the model predictions may
exceed the reasonable range of values (predictions equal to less than
zero or greater than one). Logit transformation scales variables such
that the range of values becomes <span
class="math inline">\(-\infty\)</span> and <span
class="math inline">\(\infty\)</span> on the logit scale. One can build
a model to predict logit (<span class="math inline">\(\pi^*\)</span>)
instead of proportion (<span class="math inline">\(\pi\)</span>) and
then ensure that the model predictions are bounded between 0 and 1 on
the original proportion scale after a simple reverse operation for
predicted values.</p>
<p><span class="math display">\[\pi = \frac{e^{\pi^*}}{1+e^{\pi^*}}
\]</span></p>
<p>One caveat of using logit transformation is that it is not defined
for 0 and 1. So, when you have values in the dataset exactly equal to 0
or 1, logit transformation will return either <span
class="math inline">\(-\infty\)</span> and <span
class="math inline">\(\infty\)</span>. In these situations, we may add
or substract a very tiny constant (e.g., .0001) to force the
transformation to return a numerical value.</p>
<p><span class="math display">\[\pi^{*} = ln(\frac{\pi}{1-\pi}) =
ln(\frac{0}{1-0}) = -\infty\]</span> <span
class="math display">\[\pi^{*} = ln(\frac{\pi}{1-\pi}) =
ln(\frac{1}{1-1}) = \infty\]</span></p>
<p>Below is an example of logit transformation for a randomly generated
variable.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>old</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Beta.html'>rbeta</a></span><span class='op'>(</span><span class='fl'>1000</span>,<span class='fl'>1</span>,<span class='fl'>1000</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>new</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>old</span><span class='op'>/</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>-</span><span class='va'>old</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-12-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<h2 id="basis-expansions">4.4. Basis Expansions</h2>
<p>Basis expansions are useful to address nonlinearity between a
continuous predictor variable and outcome variable. Using the basis
expansions, one can create a set of feature variables using a nonlinear
function of a variable <em>x</em>, <span
class="math inline">\(\phi(x)\)</span>. One simply replaces the original
variable <em>x</em> with the new variables obtained from <span
class="math inline">\(\phi(x)\)</span>. For continuous predictors, the
most commonly used expansions are polynomial basis expansions. The <span
class="math inline">\(n^{th}\)</span> degree polynomial basis expansion
can be represented by</p>
<p><span class="math display">\[\phi(x) = \beta_1x + \beta_2x^2 +
\beta_3x^3 + ... + \beta_nx^n .\]</span></p>
<p>Suppose we have 100 observation from a random normal variable
<em>x</em>. The third degree polynomial basis expansion (cubic basis
expansion) can be found using the <code>poly</code> function as the
following.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>654</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] -0.76031762 -0.38970450  1.68962523 -0.09423560  0.09530146
[6]  0.81727228</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/poly.html'>poly</a></span><span class='op'>(</span><span class='va'>x</span>,degree<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>                1           2            3
[1,] -0.070492258 -0.06612854  0.056003658
[2,] -0.030023304 -0.07454585 -0.003988336
[3,]  0.197028288  0.28324096  0.348896805
[4,]  0.002240307 -0.06560960 -0.044790680
[5,]  0.022936731 -0.05256865 -0.063289287
[6,]  0.101772051  0.04942613 -0.034439696</code></pre>
</div>
<p>So, one can use these three new variables representing a linear,
quadratic, and cubic trend in our prediction model instead of the
original variable <em>x</em>. See below the relationship between the
original variable <em>x</em> and the new polynomial features to replace
it.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lecture-2a_files/figure-html5/unnamed-chunk-14-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<p>For continuous predictors, there is no limit for the degree of
polynomial. The higher the degree of polynomial, the more flexible the
model becomes, and there is a higher chance of overfitting. Typically,
polynomial terms up to the 3rd or 4th degree are more than enough.</p>
<h1 id="handling-missing-data">5. Handling Missing Data</h1>
<p>Missing data deserves a course of its own. For a comprehensive review
of how to handle and impute missing data. For certain types of models
such as gradient boosting, missing data is not a problem, and one can
leave them as is without any processing. On the other hand, some models
such as regularized regression models require complete data and one have
to deal with missing data before modeling data. It is always a good idea
to run some simple descriptive analysis to understand the scope of
missing values in your dataset.</p>
<p>The <code>ff_glimpse()</code> function from the <code>finalfit</code>
package is a useful to get a quick look at the missing values in your
dataset. See an example for the recidivism dataset</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ewenharrison/finalfit'>finalfit</a></span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/finalfit/man/ff_glimpse.html'>ff_glimpse</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>)</span><span class='op'>$</span><span class='va'>Continuous</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'n'</span>,<span class='st'>'missing_percent'</span><span class='op'>)</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>                                                      n
ID                                                18111
Residence_PUMA                                    18111
Gang_Affiliated                                   15609
Supervision_Risk_Score_First                      17819
Dependents                                        18111
Prior_Arrest_Episodes_Felony                      18111
Prior_Arrest_Episodes_Misd                        18111
Prior_Arrest_Episodes_Violent                     18111
Prior_Arrest_Episodes_Property                    18111
Prior_Arrest_Episodes_Drug                        18111
Prior_Arrest_Episodes_PPViolationCharges          18111
Prior_Arrest_Episodes_DVCharges                   18111
Prior_Arrest_Episodes_GunCharges                  18111
Prior_Conviction_Episodes_Felony                  18111
Prior_Conviction_Episodes_Misd                    18111
Prior_Conviction_Episodes_Viol                    18111
Prior_Conviction_Episodes_Prop                    18111
Prior_Conviction_Episodes_Drug                    18111
Prior_Conviction_Episodes_PPViolationCharges      18111
Prior_Conviction_Episodes_DomesticViolenceCharges 18111
Prior_Conviction_Episodes_GunCharges              18111
Prior_Revocations_Parole                          18111
Prior_Revocations_Probation                       18111
Condition_MH_SA                                   18111
Condition_Cog_Ed                                  18111
Condition_Other                                   18111
Violations_ElectronicMonitoring                   18111
Violations_Instruction                            18111
Violations_FailToReport                           18111
Violations_MoveWithoutPermission                  18111
Delinquency_Reports                               18111
Program_Attendances                               18111
Program_UnexcusedAbsences                         18111
Residence_Changes                                 18111
Avg_Days_per_DrugTest                             14343
DrugTests_THC_Positive                            15254
DrugTests_Cocaine_Positive                        15254
DrugTests_Meth_Positive                           15254
DrugTests_Other_Positive                          15254
Percent_Days_Employed                             17649
Jobs_Per_Year                                     17303
Employment_Exempt                                 18111
Recidivism_Within_3years                          18111
Recidivism_Arrest_Year1                           18111
Recidivism_Arrest_Year2                           18111
Recidivism_Arrest_Year3                           18111
Training_Sample                                   18111
                                                  missing_percent
ID                                                            0.0
Residence_PUMA                                                0.0
Gang_Affiliated                                              13.8
Supervision_Risk_Score_First                                  1.6
Dependents                                                    0.0
Prior_Arrest_Episodes_Felony                                  0.0
Prior_Arrest_Episodes_Misd                                    0.0
Prior_Arrest_Episodes_Violent                                 0.0
Prior_Arrest_Episodes_Property                                0.0
Prior_Arrest_Episodes_Drug                                    0.0
Prior_Arrest_Episodes_PPViolationCharges                      0.0
Prior_Arrest_Episodes_DVCharges                               0.0
Prior_Arrest_Episodes_GunCharges                              0.0
Prior_Conviction_Episodes_Felony                              0.0
Prior_Conviction_Episodes_Misd                                0.0
Prior_Conviction_Episodes_Viol                                0.0
Prior_Conviction_Episodes_Prop                                0.0
Prior_Conviction_Episodes_Drug                                0.0
Prior_Conviction_Episodes_PPViolationCharges                  0.0
Prior_Conviction_Episodes_DomesticViolenceCharges             0.0
Prior_Conviction_Episodes_GunCharges                          0.0
Prior_Revocations_Parole                                      0.0
Prior_Revocations_Probation                                   0.0
Condition_MH_SA                                               0.0
Condition_Cog_Ed                                              0.0
Condition_Other                                               0.0
Violations_ElectronicMonitoring                               0.0
Violations_Instruction                                        0.0
Violations_FailToReport                                       0.0
Violations_MoveWithoutPermission                              0.0
Delinquency_Reports                                           0.0
Program_Attendances                                           0.0
Program_UnexcusedAbsences                                     0.0
Residence_Changes                                             0.0
Avg_Days_per_DrugTest                                        20.8
DrugTests_THC_Positive                                       15.8
DrugTests_Cocaine_Positive                                   15.8
DrugTests_Meth_Positive                                      15.8
DrugTests_Other_Positive                                     15.8
Percent_Days_Employed                                         2.6
Jobs_Per_Year                                                 4.5
Employment_Exempt                                             0.0
Recidivism_Within_3years                                      0.0
Recidivism_Arrest_Year1                                       0.0
Recidivism_Arrest_Year2                                       0.0
Recidivism_Arrest_Year3                                       0.0
Training_Sample                                               0.0</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/finalfit/man/ff_glimpse.html'>ff_glimpse</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>)</span><span class='op'>$</span><span class='va'>Categorical</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'n'</span>,<span class='st'>'missing_percent'</span><span class='op'>)</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>                            n missing_percent
Gender                  18111             0.0
Race                    18111             0.0
Age_at_Release          18111             0.0
Supervision_Level_First 16962             6.3
Education_Level         18111             0.0
Prison_Offense          15820            12.6
Prison_Years            18111             0.0</code></pre>
</div>
<p>We will focus a few ideas about how to handle missing data.</p>
<h2 id="creating-an-indicator-variable-for-missingness">5.1. Creating an
indicator variable for missingness</h2>
<p>We can create a binary indicator variable for every variable to
indicate missingness (0: not missing, 1: missing). It doesnt solve the
missing data problem because we may still have to impute the missing
values for modeling; however, an indicator variable about whether or not
a variable is missing may sometimes provide some information in
predicting the outcome. Suppose the missingness is not random, and there
is a systematic relationship between outcome and whether or not values
are missing for a variable. In that case, this may provide vital
information to bring into the model. This indicator variable would be
meaningless for variables that dont have any missing value. Therefore,
one can remove them from any further consideration.</p>
<h2 id="imputation">5.2. Imputation</h2>
<p>A common approach to missing data is to impute missing values. Each
predictor becomes an outcome of interest in imputation, and then the
remaining predictors are used to build an imputation model to predict
the missing values. Below is a very naive example of how it would work
if we have an outcome variable (Y) and three predictors (X1, X2, X3).
First, missing values are estimated and replaced for each predictor
using an imputation model, and then the primary outcome of interest is
predicted using the imputed X1, X2, and X3.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Imputation Model</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Outcome</td>
<td style="text-align: center;">Predictors</td>
</tr>
<tr class="even">
<td style="text-align: center;">X1</td>
<td style="text-align: center;">X2,X3</td>
</tr>
<tr class="odd">
<td style="text-align: center;">X2</td>
<td style="text-align: center;">X1,X3</td>
</tr>
<tr class="even">
<td style="text-align: center;">X3</td>
<td style="text-align: center;">X1,X2</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Prediction Model</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Outcome</td>
<td style="text-align: center;">Predictors</td>
</tr>
<tr class="even">
<td style="text-align: center;">Y</td>
<td style="text-align: center;">X1, X2, X3</td>
</tr>
</tbody>
</table>
<p>An imputation model can be as simple as an intercept-only model (mean
imputation). For numeric variables, missing values can be replaced with
a simple mean, median, or mode of the observed data. For categorical
variables, missing values can be replaced with a value randomly drawn
from a binomial or multinomial distribution with the observed
probabilities.</p>
<p>An imputation model can also be as complex as desired using a
regularized regression model, a decision tree model, or a K-nearest
neighbors model. The main idea of a more complex prediction model is to
find other observations similar to observations with a missing value in
terms of other predictors and use data from these similar observations
to predict the missing values. We will rely on some built-in functions
in R to impute values using such complex models. For more information
about its theoretical foundations, <a
href="http://www.appliedmissingdata.com/">Applied Missing Data Analysis
by Craig Enders</a> provides comprehensive coverage of this topic.</p>
<h1 id="wrapping-up-using-the-recipes-package">6. Wrapping-up using the
<code>recipes</code> package</h1>
<p>We can manually pre-process all the variables in the dataset using
the approaches discussed earlier. However, this would be a tedious job.
It may be overwhelming to apply all the procedures simultaneously to
different versions of the datasets (e.g., training, test, future).
Instead, we can use the <code>recipes</code> package to implement these
approaches in a more organized and efficient way.</p>
<p>Before using the <code>recipes</code> package, there are a few things
to do for this dataset.</p>
<ol type="1">
<li><p>Read the original data</p></li>
<li><p>Make a list of variables with different characteristics
(categorical, continuous, proportions, etc.)</p></li>
<li><p>Make sure the type of all categorical variables is either
<code>character</code> or <code>factor</code>.</p></li>
<li><p>For variables that represent proportions, add/subtract a small
number to 0s/1s for logit transformation</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># 1) Read the original data</span></span>
<span></span>
<span>  <span class='va'>recidivism</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='fu'><a href='https://here.r-lib.org//reference/here.html'>here</a></span><span class='op'>(</span><span class='st'>'data/recidivism_y1 removed and recoded.csv'</span><span class='op'>)</span>,header<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span></span>
<span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   18111 obs. of  54 variables:
 $ ID                                               : int  1 2 3 4 6 7 8 11 13 15 ...
 $ Gender                                           : chr  &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; ...
 $ Race                                             : chr  &quot;BLACK&quot; &quot;BLACK&quot; &quot;BLACK&quot; &quot;WHITE&quot; ...
 $ Age_at_Release                                   : chr  &quot;43-47&quot; &quot;33-37&quot; &quot;48 or older&quot; &quot;38-42&quot; ...
 $ Residence_PUMA                                   : int  16 16 24 16 17 18 16 5 18 5 ...
 $ Gang_Affiliated                                  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Supervision_Risk_Score_First                     : int  3 6 7 7 5 2 5 3 3 7 ...
 $ Supervision_Level_First                          : chr  &quot;Standard&quot; &quot;Specialized&quot; &quot;High&quot; &quot;High&quot; ...
 $ Education_Level                                  : chr  &quot;At least some college&quot; &quot;Less than HS diploma&quot; &quot;At least some college&quot; &quot;Less than HS diploma&quot; ...
 $ Dependents                                       : int  3 1 3 1 0 2 3 1 1 1 ...
 $ Prison_Offense                                   : chr  &quot;Drug&quot; &quot;Violent/Non-Sex&quot; &quot;Drug&quot; &quot;Property&quot; ...
 $ Prison_Years                                     : chr  &quot;More than 3 years&quot; &quot;More than 3 years&quot; &quot;1-2 years&quot; &quot;1-2 years&quot; ...
 $ Prior_Arrest_Episodes_Felony                     : int  6 7 6 8 4 10 6 3 8 9 ...
 $ Prior_Arrest_Episodes_Misd                       : int  6 6 6 6 0 6 6 6 4 3 ...
 $ Prior_Arrest_Episodes_Violent                    : int  1 3 3 0 1 1 3 2 0 2 ...
 $ Prior_Arrest_Episodes_Property                   : int  3 0 2 3 3 5 1 1 5 2 ...
 $ Prior_Arrest_Episodes_Drug                       : int  3 3 2 3 0 1 2 1 2 4 ...
 $ Prior_Arrest_Episodes_PPViolationCharges         : int  4 5 5 3 0 5 5 3 1 4 ...
 $ Prior_Arrest_Episodes_DVCharges                  : int  0 1 1 0 0 0 0 1 0 0 ...
 $ Prior_Arrest_Episodes_GunCharges                 : int  0 0 0 0 0 1 0 0 0 1 ...
 $ Prior_Conviction_Episodes_Felony                 : int  3 3 3 3 1 3 1 0 1 3 ...
 $ Prior_Conviction_Episodes_Misd                   : int  3 4 2 4 0 1 4 3 0 2 ...
 $ Prior_Conviction_Episodes_Viol                   : int  0 1 1 0 0 0 1 0 0 1 ...
 $ Prior_Conviction_Episodes_Prop                   : int  2 0 1 3 2 3 0 0 2 1 ...
 $ Prior_Conviction_Episodes_Drug                   : int  2 2 2 2 0 0 2 0 1 1 ...
 $ Prior_Conviction_Episodes_PPViolationCharges     : int  0 1 0 0 0 1 1 1 0 1 ...
 $ Prior_Conviction_Episodes_DomesticViolenceCharges: int  0 1 1 0 0 0 0 0 0 0 ...
 $ Prior_Conviction_Episodes_GunCharges             : int  0 1 0 0 0 1 0 0 0 0 ...
 $ Prior_Revocations_Parole                         : int  0 0 0 0 0 0 0 1 0 0 ...
 $ Prior_Revocations_Probation                      : int  0 0 0 1 0 0 0 0 0 0 ...
 $ Condition_MH_SA                                  : int  1 0 1 1 0 0 0 1 0 1 ...
 $ Condition_Cog_Ed                                 : int  1 0 1 1 0 0 1 1 0 1 ...
 $ Condition_Other                                  : int  0 0 0 0 1 0 0 0 0 1 ...
 $ Violations_ElectronicMonitoring                  : int  0 0 0 0 0 0 0 1 0 0 ...
 $ Violations_Instruction                           : int  0 1 1 0 0 0 0 1 0 0 ...
 $ Violations_FailToReport                          : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Violations_MoveWithoutPermission                 : int  0 0 1 0 1 0 0 0 0 0 ...
 $ Delinquency_Reports                              : int  0 4 4 0 0 0 0 0 0 0 ...
 $ Program_Attendances                              : int  6 0 6 6 0 0 0 9 0 6 ...
 $ Program_UnexcusedAbsences                        : int  0 0 0 0 0 0 0 2 0 0 ...
 $ Residence_Changes                                : int  2 2 0 3 3 1 0 2 1 1 ...
 $ Avg_Days_per_DrugTest                            : num  612 35.7 93.7 25.4 474.6 ...
 $ DrugTests_THC_Positive                           : num  0 0 0.333 0 0 ...
 $ DrugTests_Cocaine_Positive                       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ DrugTests_Meth_Positive                          : num  0 0 0.167 0 0 ...
 $ DrugTests_Other_Positive                         : num  0 0 0 0 0 ...
 $ Percent_Days_Employed                            : num  0.489 0.425 0 1 0.674 ...
 $ Jobs_Per_Year                                    : num  0.448 2 0 0.719 0.308 ...
 $ Employment_Exempt                                : int  0 0 0 0 0 0 0 1 0 1 ...
 $ Recidivism_Within_3years                         : int  0 1 1 0 0 1 0 1 0 0 ...
 $ Recidivism_Arrest_Year1                          : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Recidivism_Arrest_Year2                          : int  0 0 1 0 0 0 0 1 0 0 ...
 $ Recidivism_Arrest_Year3                          : int  0 1 0 0 0 1 0 0 0 0 ...
 $ Training_Sample                                  : int  1 1 1 1 0 1 0 1 1 0 ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># 2) List of variable types</span></span>
<span>  </span>
<span>  <span class='va'>outcome</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Recidivism_Arrest_Year2'</span><span class='op'>)</span></span>
<span>  </span>
<span>  <span class='va'>id</span>      <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'ID'</span><span class='op'>)</span></span>
<span>  </span>
<span>  <span class='va'>categorical</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Residence_PUMA'</span>,</span>
<span>                   <span class='st'>'Prison_Offense'</span>,</span>
<span>                   <span class='st'>'Age_at_Release'</span>,</span>
<span>                   <span class='st'>'Supervision_Level_First'</span>,</span>
<span>                   <span class='st'>'Education_Level'</span>,</span>
<span>                   <span class='st'>'Prison_Years'</span>,</span>
<span>                   <span class='st'>'Gender'</span>,</span>
<span>                   <span class='st'>'Race'</span>,</span>
<span>                   <span class='st'>'Gang_Affiliated'</span>,</span>
<span>                   <span class='st'>'Prior_Arrest_Episodes_DVCharges'</span>,</span>
<span>                   <span class='st'>'Prior_Arrest_Episodes_GunCharges'</span>,</span>
<span>                   <span class='st'>'Prior_Conviction_Episodes_Viol'</span>,</span>
<span>                   <span class='st'>'Prior_Conviction_Episodes_PPViolationCharges'</span>,</span>
<span>                   <span class='st'>'Prior_Conviction_Episodes_DomesticViolenceCharges'</span>,</span>
<span>                   <span class='st'>'Prior_Conviction_Episodes_GunCharges'</span>,</span>
<span>                   <span class='st'>'Prior_Revocations_Parole'</span>,</span>
<span>                   <span class='st'>'Prior_Revocations_Probation'</span>,</span>
<span>                   <span class='st'>'Condition_MH_SA'</span>,</span>
<span>                   <span class='st'>'Condition_Cog_Ed'</span>,</span>
<span>                   <span class='st'>'Condition_Other'</span>,</span>
<span>                   <span class='st'>'Violations_ElectronicMonitoring'</span>,</span>
<span>                   <span class='st'>'Violations_Instruction'</span>,</span>
<span>                   <span class='st'>'Violations_FailToReport'</span>,</span>
<span>                   <span class='st'>'Violations_MoveWithoutPermission'</span>,</span>
<span>                   <span class='st'>'Employment_Exempt'</span><span class='op'>)</span> </span>
<span></span>
<span>  <span class='va'>numeric</span>   <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Supervision_Risk_Score_First'</span>,</span>
<span>                 <span class='st'>'Dependents'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_Felony'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_Misd'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_Violent'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_Property'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_Drug'</span>,</span>
<span>                 <span class='st'>'Prior_Arrest_Episodes_PPViolationCharges'</span>,</span>
<span>                 <span class='st'>'Prior_Conviction_Episodes_Felony'</span>,</span>
<span>                 <span class='st'>'Prior_Conviction_Episodes_Misd'</span>,</span>
<span>                 <span class='st'>'Prior_Conviction_Episodes_Prop'</span>,</span>
<span>                 <span class='st'>'Prior_Conviction_Episodes_Drug'</span>,</span>
<span>                 <span class='st'>'Delinquency_Reports'</span>,</span>
<span>                 <span class='st'>'Program_Attendances'</span>,</span>
<span>                 <span class='st'>'Program_UnexcusedAbsences'</span>,</span>
<span>                 <span class='st'>'Residence_Changes'</span>,</span>
<span>                 <span class='st'>'Avg_Days_per_DrugTest'</span>,</span>
<span>                 <span class='st'>'Jobs_Per_Year'</span><span class='op'>)</span></span>
<span>  </span>
<span>  <span class='va'>props</span>      <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'DrugTests_THC_Positive'</span>,</span>
<span>                  <span class='st'>'DrugTests_Cocaine_Positive'</span>,</span>
<span>                  <span class='st'>'DrugTests_Meth_Positive'</span>,</span>
<span>                  <span class='st'>'DrugTests_Other_Positive'</span>,</span>
<span>                  <span class='st'>'Percent_Days_Employed'</span><span class='op'>)</span></span>
<span>  </span>
<span><span class='co'># 3) Convert all nominal, ordinal, and binary variables to factors</span></span>
<span>  <span class='co'># Leave the rest as is</span></span>
<span>  </span>
<span>  <span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='va'>categorical</span><span class='op'>)</span><span class='op'>{</span></span>
<span>    </span>
<span>    <span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span><span class='op'>)</span></span>
<span>    </span>
<span>  <span class='op'>}</span></span>
<span>  </span>
<span><span class='co'># 4) For variables that represent proportions, add/substract a small number</span></span>
<span>  <span class='co'># to 0s/1s for logit transformation</span></span>
<span>  </span>
<span>  <span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='va'>props</span><span class='op'>)</span><span class='op'>{</span></span>
<span>    <span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span><span class='op'>==</span><span class='fl'>0</span>,<span class='fl'>.0001</span>,<span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span><span class='op'>)</span></span>
<span>    <span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span><span class='op'>==</span><span class='fl'>1</span>,<span class='fl'>.9999</span>,<span class='va'>recidivism</span><span class='op'>[</span>,<span class='va'>i</span><span class='op'>]</span><span class='op'>)</span></span>
<span>  <span class='op'>}</span></span></code></pre>
</div>
</div>
<p>Now, we can apply certain transformations to different types of
variables. We will use the <code>step_***()</code> functions from the
<code>recipes</code> package to implement different procedures. Below is
a list of functions for most procedures discussed earlier in this
lecture. A more detailed list of <code>step_***()</code> functions can
be found the in <a
href="https://cran.r-project.org/web/packages/recipes/recipes.pdf">the
package manual</a>.</p>
<ul>
<li><code>step_dummy()</code>: creates dummy variables for one-hot
encoding of categorical variables</li>
<li><code>step_indicate_na()</code> creates an indicator variable for
missingness</li>
<li><code>step_impute_bag()</code>, <code>step_impute_knn()</code>,
<code>step_impute_linear()</code>, and <code>step_impute_mean()</code>:
imputes missing values using an imputation model</li>
<li><code>step_BoxCox()</code>: transforms non-negative data using
Box-Cox method</li>
<li><code>step_poly</code>,<code>step_bs()</code>, and
<code>step_ns()</code> : creates basis expansions</li>
<li><code>step_logit</code>: applies logit transformation</li>
<li><code>step_zv</code>: removes variables with zero variance</li>
<li><code>step_normalize</code>: standardize variables to have a mean of
zero and standard deviation of one</li>
</ul>
<p>Note that the order of procedures applied to variables is important.
For instance, there would be no meaning of using
<code>step_indicate_na()</code> after using
<code>step_impute_bag()</code> (Why?). Or, there will be a problem when
you first standardize variables using step_normalize()` and then apply
a Box-Cox transformation (Why?).</p>
<p>For this dataset, we will implement the following steps:</p>
<ol type="1">
<li>Create an indicator variable of missingness for all predictors
(<code>step_indicate_na</code>)</li>
<li>Remove the variables with zero variance (<code>step_zv</code>)</li>
<li>Impute the missing values for all predictor variables using a mean
or mode (<code>step_impute_mean</code> and
<code>step_impute_mode</code>)</li>
<li>Logit transform the variables that represent
proportions(<code>step_logit</code>)</li>
<li>Create polynomial terms up to the 2nf degree term for all numeric
variables (<code>step_poly</code>)</li>
<li>Standardize numeric features</li>
<li>One-hot encoding of all categorical variables
(<code>step_dummy</code>)</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/tidymodels/recipes'>recipes</a></span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>blueprint</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe</a></span><span class='op'>(</span>x  <span class='op'>=</span> <span class='va'>recidivism</span>,</span>
<span>                    vars  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>categorical</span>,<span class='va'>numeric</span>,<span class='va'>props</span>,<span class='va'>outcome</span>,<span class='va'>id</span><span class='op'>)</span>,</span>
<span>                    roles <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>'predictor'</span>,<span class='fl'>48</span><span class='op'>)</span>,<span class='st'>'outcome'</span>,<span class='st'>'ID'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># for all 48 predictors, create an indicator variable for missingness</span></span>
<span></span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_indicate_na.html'>step_indicate_na</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>categorical</span><span class='op'>)</span>,<span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>numeric</span><span class='op'>)</span>,<span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>props</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># Remove the variable with zero variance, this will also remove the missingness </span></span>
<span>  <span class='co'># variables if there is no missingess</span></span>
<span></span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_zv.html'>step_zv</a></span><span class='op'>(</span><span class='fu'><a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># Impute the missing values using mean and mode. You can instead use a </span></span>
<span>  <span class='co'># more advanced imputation model such as bagged trees. I haven't used it due</span></span>
<span>  <span class='co'># to time concerns</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_impute_mean.html'>step_impute_mean</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>numeric</span><span class='op'>)</span>,<span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>props</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_impute_mode.html'>step_impute_mode</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>categorical</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'>#Logit transformation of proportions</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_logit.html'>step_logit</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>props</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># 2nd degree polynomial terms for numeric variables and proportions</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_poly.html'>step_poly</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>numeric</span><span class='op'>)</span>,<span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>props</span><span class='op'>)</span>,degree<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># Standardize the polynomial terms of numeric variables and proportions</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_normalize.html'>step_normalize</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>numeric</span>,<span class='st'>'_poly_1'</span><span class='op'>)</span>,</span>
<span>                 <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>numeric</span>,<span class='st'>'_poly_2'</span><span class='op'>)</span>,</span>
<span>                 <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>props</span>,<span class='st'>'_poly_1'</span><span class='op'>)</span>,</span>
<span>                 <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>props</span>,<span class='st'>'_poly_2'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  </span>
<span>  <span class='co'># One-hot encoding for all categorical variables</span></span>
<span>  </span>
<span>  <span class='fu'><a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/all_of.html'>all_of</a></span><span class='op'>(</span><span class='va'>categorical</span><span class='op'>)</span>,one_hot<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class='va'>blueprint</span></span></code></pre>
</div>
<pre><code>Recipe

Inputs:

      role #variables
        ID          1
   outcome          1
 predictor         48

Operations:

Creating missing data variable indicators for all_of(categorical), all_of(numeric),...
Zero variance filter on all_numeric()
Mean imputation for all_of(numeric), all_of(props)
Mode imputation for all_of(categorical)
Logit transformation on all_of(props)
Orthogonal polynomials on all_of(numeric), all_of(props)
Centering and scaling for paste0(numeric, &quot;_poly_1&quot;), paste0(nu...
Dummy variables from all_of(categorical)</code></pre>
</div>
<p>Once the recipe is ready, we can train the blueprint on training
data. When we say train, it means that weights or statistics for
certain types of operations (e.g., standardization) are calculated based
on training data and saved for later use. For instance, the mean and
standard deviation of variable X from training data is calculated and
later used to standardize the same variable X in testing data or future
datasets. For now, we will train the blueprint using the whole dataset.
In future lectures, we will split data into different subsets (training
vs.test), and use the training dataset to apply the blueprint.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>prepare</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://recipes.tidymodels.org/reference/prep.html'>prep</a></span><span class='op'>(</span><span class='va'>blueprint</span>, </span>
<span>                training <span class='op'>=</span> <span class='va'>recidivism</span><span class='op'>)</span></span>
<span><span class='va'>prepare</span></span></code></pre>
</div>
<pre><code>Recipe

Inputs:

      role #variables
        ID          1
   outcome          1
 predictor         48

Training data contained 18111 data points and 7977 incomplete rows. 

Operations:

Creating missing data variable indicators for Residence_PUMA, Prison_Offense, Age_a... [trained]
Zero variance filter removed na_ind_Residence_PUMA, na_ind... [trained]
Mean imputation for Supervision_Risk_Score_First, Depende... [trained]
Mode imputation for Residence_PUMA, Prison_Offense, Age_a... [trained]
Logit transformation on DrugTests_THC_Positive, DrugTests_... [trained]
Orthogonal polynomials on Supervision_Risk_Score_First, De... [trained]
Centering and scaling for Supervision_Risk_Score_First_poly_1, ... [trained]
Dummy variables from Residence_PUMA, Prison_Offense, Age_at_Release,... [trained]</code></pre>
</div>
<p>Finally, we can apply this recipe to our dataset to obtain processed
variables according to the recipe.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>baked_recidivism</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://recipes.tidymodels.org/reference/bake.html'>bake</a></span><span class='op'>(</span><span class='va'>prepare</span>, new_data <span class='op'>=</span> <span class='va'>recidivism</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>baked_recidivism</span></span></code></pre>
</div>
<pre><code># A tibble: 18,111 x 144
   Recidivism_Arrest_Year2    ID na_ind_Prison_Offen~ na_ind_Supervis~
                     &lt;int&gt; &lt;int&gt;                &lt;int&gt;            &lt;int&gt;
 1                       0     1                    0                0
 2                       0     2                    0                0
 3                       1     3                    0                0
 4                       0     4                    0                0
 5                       0     6                    0                0
 6                       0     7                    1                0
 7                       0     8                    0                0
 8                       1    11                    0                0
 9                       0    13                    0                0
10                       0    15                    0                0
# ... with 18,101 more rows, and 140 more variables:
#   na_ind_Gang_Affiliated &lt;int&gt;,
#   na_ind_Supervision_Risk_Score_First &lt;int&gt;,
#   na_ind_Avg_Days_per_DrugTest &lt;int&gt;, na_ind_Jobs_Per_Year &lt;int&gt;,
#   na_ind_DrugTests_THC_Positive &lt;int&gt;,
#   na_ind_DrugTests_Cocaine_Positive &lt;int&gt;,
#   na_ind_DrugTests_Meth_Positive &lt;int&gt;, ...</code></pre>
</div>
<p>Notice that there are 144 variables (one outcome, one ID, and 142
predictors) in the new processed dataset. In the original dataset, there
were 48 predictors. Below is a breakdown of where these 142 variables
come from.</p>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 7%" />
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Variable Name</th>
<th style="text-align: center;">Encoding</th>
<th style="text-align: center;">Number of Categories</th>
<th style="text-align: center;">Process</th>
<th style="text-align: center;">Number of Constructed Variables</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Gender</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Race</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Gang affiliation</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Arrest_Episodes_DVCharges</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Arrest_Episodes_GunCharges</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Conviction_Episodes_Viol</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td
style="text-align: center;">Prior_Conviction_Episodes_PPViolationCharges</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td
style="text-align: center;">Prior_Conviction_Episodes_DomesticViolenceCharges</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td
style="text-align: center;">Prior_Conviction_Episodes_GunCharges</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Revocations_Parole</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Revocations_Probation</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Condition_MH_SA</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Condition_Cog_Ed</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Condition_Other</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Violations_ElectronicMonitoring</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Violations_Instruction</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Violations_FailToReport</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Violations_MoveWithoutPermission</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Employment_Exempt</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">Age_at_Release</td>
<td style="text-align: center;">Ordinal</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">7</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Supervision_Level_First</td>
<td style="text-align: center;">Ordinal</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="even">
<td style="text-align: center;">Education_Level</td>
<td style="text-align: center;">Ordinal</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prison_Years</td>
<td style="text-align: center;">Ordinal</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">Residence_PUMA</td>
<td style="text-align: center;">Nominal</td>
<td style="text-align: center;">25</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">25</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prison_Offense</td>
<td style="text-align: center;">Nominal</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">One-hot encoding</td>
<td style="text-align: center;">5</td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Supervision_Risk_Score_First</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Dependents</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Arrest_Episodes_Felony</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Arrest_Episodes_Misd</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Arrest_Episodes_Violent</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Arrest_Episodes_Property</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Arrest_Episodes_Drug</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td
style="text-align: center;">Prior_Arrest_Episodes_PPViolationCharges</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Conviction_Episodes_Felony</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Conviction_Episodes_Misd</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Prior_Conviction_Episodes_Prop</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Prior_Conviction_Episodes_Drug</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Delinquency_Reports</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Program_Attendances</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Program_UnexcusedAbsences</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Residence_Changes</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Avg_Days_per_DrugTest</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">Jobs_Per_Year</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">DrugTests_THC_Positive</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">DrugTests_Cocaine_Positive</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">DrugTests_Meth_Positive</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">DrugTests_Other_Positive</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Percent_Days_Employed</td>
<td style="text-align: center;">Numeric</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Polynomials, Standardization</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">Missing value indicator variables</td>
<td style="text-align: center;">Binary</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">11</td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Total</td>
<td style="text-align: center;">142</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb19"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="reuse">Reuse</h3>
<p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<div class="distill-site-nav distill-site-footer">
<center>
<p> Cengiz Zopluoglu, cengiz@uoregon.edu </p>
<p> Made using <a href="https://rstudio.github.io/distill/website.html"> the Distill for R Markdown</a> in 
<a href = "https://www.rstudio.com"> RStudio.</a></p>
<p>Copyright &copy; 2022 Cengiz Zopluoglu. All rights reserved.</p>
</center>
</div>
<!--/radix_placeholder_navigation_after_body-->


</body>

</html>
